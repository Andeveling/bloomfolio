---
import { getCollection } from "astro:content";
import ProjectCard from "./ProjectCard.astro";

const projectEntries = await getCollection("projects");

// Sort by start date, most recent first
const sortedProjects = projectEntries.sort(
  (a, b) => b.data.startDate.getTime() - a.data.startDate.getTime(),
);
---

<section id="projects" class="relative py-32 px-6 overflow-hidden">
  <!-- Subtle gradient background -->
  <div
    class="absolute inset-0 bg-gradient-to-b from-base-100 via-base-200/50 to-base-100 -z-10"
  >
  </div>

  <div class="max-w-7xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-20 max-w-3xl mx-auto">
      <h2
        class="text-5xl md:text-6xl font-bold mb-6 tracking-tight bg-gradient-to-r from-base-content to-base-content/70 bg-clip-text text-transparent"
      >
        Dale un vistazo a mis proyectos
      </h2>
      <p
        class="text-xl md:text-2xl text-base-content/60 font-light leading-relaxed"
      >
        Actualmente estoy trabajando en nojau, una startup colombiana. Con un
        buen equipo y un claro objetivo, estamos creando soluciones web que
        resuelven problemas reales para nuestros clientes.
      </p>
    </div>

    <!-- Projects Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        sortedProjects.map((project, index) => (
          <div
            class="project-card-wrapper"
            style={`animation-delay: ${index * 0.1}s`}
          >
            <ProjectCard project={project} />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-scale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .project-card-wrapper {
    animation: fade-in-scale 0.6s ease-out forwards;
    opacity: 0;
  }
</style>
